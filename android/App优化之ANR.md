ANR基本是属于App中卡,慢的极致了,属于不可用的状态了.
# 为什么会产生ANR
在Android里, App的响应能力是由Activity Manager和Window Manager系统服务来监控的.  
# 如何避免ANR
通常在如下两种情况下会弹出ANR对话框:
- 5s内无法响应用户输入事件(例如键盘输入, 触摸屏幕等).
- BroadcastReceiver在10s内无法结束.

造成以上两种情况的首要原因就是在主线程(UI线程)里面做了太多的阻塞耗时操作,例如文件读写,数据库读写,网络查询等等。  

知道了ANR产生的原因, 那么想要避免ANR, 也就很简单了, 就一条规则:**不要在主线程(UI线程)里面做繁重的操作.**
# ANR分析
ANR产生时, 日志窗口会打出日志，系统也会生成一个traces.txt的文件放在/data/anr/下. 可以通过adb命令将其导出到本地:
```
$adb pull data/anr/traces.txt
```

拿到traces，开始分析：
- 文件最上的即为最新产生的ANR的trace信息.
- 前面两行表明ANR发生的进程pid,时间,以及进程名字(包名).
- 寻找我们的代码点,然后往前推,看方法调用栈,追溯到问题产生的根源.

产生ANR的处理
1. 主线程阻塞的  
开辟单独的子线程来处理耗时阻塞事务.
2. CPU满负荷, I/O阻塞的  
I/O阻塞一般来说就是文件读写或数据库操作执行在主线程了, 也可以通过开辟子线程的方式异步执行.
3. 内存不够用的  
增大VM内存, 使用largeHeap属性, 排查内存泄露(这个在内存优化那篇细说吧)等.



参考:  
[Android App优化之ANR详解](http://www.jianshu.com/p/6d855e984b99)